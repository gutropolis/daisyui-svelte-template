const e=["en","es"],o="PARAGLIDE_LOCALE",n=["cookie","globalVariable","baseLocale"];let t;globalThis.__paraglide={};let i=!1,a=()=>{let e;for(const o of n){if("cookie"===o)e=s();else if("baseLocale"===o)e="en";else if("globalVariable"===o&&void 0!==t)e=t;else if(u(o)&&d.has(o)){const n=d.get(o);if(n){const o=n.getLocale();if(o instanceof Promise)continue;e=o}}if(void 0!==e){const o=l(e);return i||(t=o,i=!0,r(o,{reload:!1})),o}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};let r=(e,i)=>{const r={reload:!0,...i};let c;try{c=a()}catch{}const l=[];for(const a of n)if("globalVariable"===a)t=e;else if("cookie"===a){if("undefined"==typeof document||"undefined"==typeof window)continue;const n=`${o}=${e}; path=/; max-age=34560000`;document.cookie=n}else{if("baseLocale"===a)continue;if(u(a)&&d.has(a)){const o=d.get(a);if(o){let n=o.setLocale(e);n instanceof Promise&&(n=n.catch(e=>{throw new Error(`Custom strategy "${a}" setLocale failed.`,{cause:e})}),l.push(n))}}}const s=()=>{r.reload&&window.location&&e!==c&&window.location.reload()};if(l.length)return Promise.all(l).then(()=>{s()});s()};function c(o){return"string"==typeof o&&(!!o&&e.some(e=>e.toLowerCase()===o.toLowerCase()))}function l(o){if("string"!=typeof o)throw new Error(`Invalid locale: ${o}. Expected a string.`);const n=o.toLowerCase(),t=e.find(e=>e.toLowerCase()===n);if(!t)throw new Error(`Invalid locale: ${o}. Expected one of: ${e.join(", ")}`);return t}function s(){if("undefined"==typeof document||!document.cookie)return;const e=document.cookie.match(new RegExp(`(^| )${o}=([^;]+)`)),n=e?.[2];return c(n)?n:void 0}function f(e){return function(e){const o="string"==typeof e?new URL(e,"undefined"!=typeof window?window.location.origin:"http://fallback.com"):new URL(e),n=o.pathname.split("/").filter(Boolean);n.length>0&&c(n[0])&&(o.pathname="/"+n.slice(1).join("/"));return o}(e)}const d=new Map;function u(e){return"string"==typeof e&&/^custom-[A-Za-z0-9_-]+$/.test(e)}export{f as d,a as g,r as s};
